<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Israel Election PAD : Real time tracker and analysis of the 2015 Israel Elections">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Israel Election PAD</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/yonicd/Elections">View on GitHub</a>

          <h1 id="project_title">Israel Election PAD</h1>
          <h2 id="project_tagline">Real time tracker and analysis of the 2015 Israel Elections</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/yonicd/Elections/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/yonicd/Elections/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3>
<a id="the-israel-election-polls-analysis-depot-is-an-interactive-web-application-for-analyzing-the-elections-in-israel-powered-by-the-shiny-library-of-rstudio-and-real-time-published-polling-data-from-the-project-61-database" class="anchor" href="#the-israel-election-polls-analysis-depot-is-an-interactive-web-application-for-analyzing-the-elections-in-israel-powered-by-the-shiny-library-of-rstudio-and-real-time-published-polling-data-from-the-project-61-database" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Israel Election Polls Analysis Depot is an interactive web application for analyzing the elections in Israel powered by the <a href="http://shiny.rstudio.com/">Shiny library of RStudio</a> and real time published polling data from the <a href="http://infomeyda.com/">Project 61</a> database.</h3>

<h4>
<a id="the-app-can-be-found-on-the-shiny-servers-or-can-be-run-through-github" class="anchor" href="#the-app-can-be-found-on-the-shiny-servers-or-can-be-run-through-github" aria-hidden="true"><span class="octicon octicon-link"></span></a>The App can be found on the <a href="https://yonicd.shinyapps.io/Elections">shiny servers</a> or can be run through Github</h4>

<div class="highlight highlight-r"><pre><span class="pl-c">#If running on Windows Sys.setlocale("LC_ALL", "Hebrew_Israel.1255")</span>

<span class="pl-c">#check to see if libraries need to be installed</span>
<span class="pl-v">libs</span><span class="pl-k">=</span>c(<span class="pl-s1"><span class="pl-pds">"</span>shiny<span class="pl-pds">"</span></span>,<span class="pl-s1"><span class="pl-pds">"</span>shinyAce<span class="pl-pds">"</span></span>,<span class="pl-s1"><span class="pl-pds">"</span>plyr<span class="pl-pds">"</span></span>,<span class="pl-s1"><span class="pl-pds">"</span>dplyr<span class="pl-pds">"</span></span>,<span class="pl-s1"><span class="pl-pds">"</span>httr<span class="pl-pds">"</span></span>,<span class="pl-s1"><span class="pl-pds">"</span>XML<span class="pl-pds">"</span></span>,<span class="pl-s1"><span class="pl-pds">"</span>reshape2<span class="pl-pds">"</span></span>,<span class="pl-s1"><span class="pl-pds">"</span>stringr<span class="pl-pds">"</span></span>,<span class="pl-s1"><span class="pl-pds">"</span>ggplot2<span class="pl-pds">"</span></span>,<span class="pl-s1"><span class="pl-pds">"</span>scales<span class="pl-pds">"</span></span>)
<span class="pl-v">x</span><span class="pl-k">=</span>sapply(<span class="pl-vo">libs</span>,<span class="pl-k">function</span>(<span class="pl-vo">x</span>)<span class="pl-k">if</span>(<span class="pl-k">!</span>require(<span class="pl-vo">x</span>,<span class="pl-v">character.only</span> <span class="pl-k">=</span> <span class="pl-c1">T</span>)) install.packages(<span class="pl-vo">x</span>));rm(<span class="pl-vo">x</span>,<span class="pl-vo">libs</span>)

<span class="pl-e">shiny</span><span class="pl-k">::</span>runGitHub(<span class="pl-s1"><span class="pl-pds">"</span>Elections<span class="pl-pds">"</span></span>,<span class="pl-s1"><span class="pl-pds">"</span>yonicd<span class="pl-pds">"</span></span>)
Sys.setlocale(<span class="pl-s1"><span class="pl-pds">"</span>LC_ALL<span class="pl-pds">"</span></span>)</pre></div>

<h1>
<a id="application-layout" class="anchor" href="#application-layout" aria-hidden="true"><span class="octicon octicon-link"></span></a>Application Layout:</h1>

<ol>
<li><a href="#election-pad">Election PAD</a></li>
<li><a href="#election-analysis">Election Analyis</a></li>
<li><a href="#mandate-simulator-and-coalition-whiteboard">Mandate Simulator and Coalition Whiteboard</a></li>
<li><a href="#polling-database">Polling Database</a></li>
</ol>

<h1>
<a id="usage-instructions" class="anchor" href="#usage-instructions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage Instructions:</h1>

<h2>
<a id="election-pad" class="anchor" href="#election-pad" aria-hidden="true"><span class="octicon octicon-link"></span></a>Election PAD</h2>

<ul>
<li>The latest polling day results published in the media and the prediction made using the Project 61 weighting schemes. The parties are stacked into blocks to see which block has best chance to create a coalition.</li>
</ul>

<p><img src="https://raw.githubusercontent.com/yonicd/Elections/master/www/LastDayPlot.png" alt="Current Day"></p>

<p>The Project 61 prediction is based past pollster error deriving weights from the 2003,2006,2009 and 2013 elections, dependant on days to elections and parties. In their <a href="http://shiny.rstudio.com/">site</a> there is an extensive analysis on pollster bias towards certain parties and party blocks.</p>

<h2>
<a id="election-analysis" class="anchor" href="#election-analysis" aria-hidden="true"><span class="octicon octicon-link"></span></a>Election Analysis</h2>

<ul>
<li>An interactive polling analysis layout where the user can filter elections, parties, publishers and pollster, dates and create different types of plots using any variable as 
the x and y axis.</li>
</ul>

<p><img src="https://raw.githubusercontent.com/yonicd/Elections/master/www/pad_screen_grab.png" alt="Snapshot of Election Analysis Page"></p>

<p>The user can choose to include in the plots Elections (2003,2006,2009,2013,2015) and the subsequent filters are populated with the relevant parties, pollsters and publishers relevant to the chosen elections. Next there is a slider to choose the days before the election you want to view in the plot. This was used instead of a calendar to make a uniform timeline when comparing across elections.</p>

<p>In addition the plot itself is a ggplot thus the options above the graph give the user control on nearly all the options to build a plot. The user can choose from the following variables:</p>

<table>
<thead>
<tr>
<th align="center">Time</th>
<th align="center">Party</th>
<th align="center">Results</th>
<th align="center">Poll</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Election</td>
<td align="center">Party</td>
<td align="center">Mandates</td>
<td align="center">Publisher</td>
</tr>
<tr>
<td align="center">DaysLeft</td>
<td align="center">Ideology (5 Party Blocks)</td>
<td align="center">Mandate.Group</td>
<td align="center">Pollster</td>
</tr>
<tr>
<td align="center">Date</td>
<td align="center">Ideology.Group (2 Party Blocks)</td>
<td align="center">Results</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">year</td>
<td align="center">Attribute (Party History)</td>
<td align="center">(Pollster) Error</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">month</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">week</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>

<p>To define the following plot attributes:</p>

<table>
<thead>
<tr>
<th align="center">Plot Type</th>
<th align="center">Axes</th>
<th align="center">Grouping</th>
<th align="center">Plot Facets</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Point</td>
<td align="center">X axis variable</td>
<td align="center">Split Y by colors using a different variable</td>
<td align="center">Row Facet</td>
</tr>
<tr>
<td align="center">Bar</td>
<td align="center">Discrete/Continuous</td>
<td align="center"></td>
<td align="center">Column Facet</td>
</tr>
<tr>
<td align="center">Line</td>
<td align="center">Rotation of X tick labels</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">Step</td>
<td align="center">Y axis variable</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">Boxplot</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">Density</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody>
</table>

<ul>
<li>Create Facets to display subsets of the data in different panels (two more variables to cut data) there are two type of facets to choose from

<ul>
<li>Wrap: Wrap 1d ribbon of panels into 2d</li>
<li>Grid: Layout panels in a grid (matrix)</li>
</ul>
</li>
</ul>

<p>An example of filtering parties in the 2015 elections:
<img src="https://raw.githubusercontent.com/yonicd/Elections/master/www/pad_screen_grab_filter.png" alt="Snapshot of Election Analysis Page with filter"></p>

<p>An example of comparing distribution polling errors by day to election and party blocks
<img src="https://raw.githubusercontent.com/yonicd/Elections/master/www/ElectionPlot_longitudinal.png" alt="Election Comparison"></p>

<ul>
<li>If you are an R user and know ggplot there is an additional editor console,below the plot, where you can create advanced plots freehand, just add to the final object from the GUI called p and the data.frame is x, eg p+geom_point(). Just notice that all aesthetics must be given they are not defined in the original ggplot() definition. It is also possible to use any library you want just add it to the top of the code, the end object must be a ggplot.
<img src="https://raw.githubusercontent.com/yonicd/Elections/master/www/pad_screen_grab_ace.png" alt="Snapshot of PAD Plot">
</li>
</ul>

<div class="highlight highlight-r"><pre><span class="pl-c">#new layer</span>
<span class="pl-vo">p</span><span class="pl-k">+</span>geom_smooth(aes(<span class="pl-v">x</span><span class="pl-k">=</span><span class="pl-vo">DaysLeft</span>,<span class="pl-v">y</span><span class="pl-k">=</span><span class="pl-vo">Mandates</span>,<span class="pl-v">fill</span><span class="pl-k">=</span><span class="pl-vo">Party.En</span>))<span class="pl-k">+</span>
scale_x_reverse()<span class="pl-k">+</span>scale_fill_discrete(<span class="pl-v">name</span><span class="pl-k">=</span><span class="pl-s1"><span class="pl-pds">"</span>Party<span class="pl-pds">"</span></span>)</pre></div>

<ul>
<li>You can also remove the original layer if you want using the function remove_geom(ggplot_object,geom_layer), eg p=p+remove_geom(p,"point") will remove the geom_point layer in the original graph
<img src="https://raw.githubusercontent.com/yonicd/Elections/master/www/pad_screen_grab_ace_remove_geom.png" alt="Snapshot of PAD Plot">
</li>
</ul>

<div class="highlight highlight-r"><pre><span class="pl-v">p</span><span class="pl-k">=</span>remove_geom(<span class="pl-vo">p</span>,<span class="pl-s1"><span class="pl-pds">"</span>point<span class="pl-pds">"</span></span>) <span class="pl-c">#blank ggplot with facets in place</span>
<span class="pl-c">#new layer</span>
<span class="pl-vo">p</span><span class="pl-k">+</span>geom_smooth(aes(<span class="pl-v">x</span><span class="pl-k">=</span><span class="pl-vo">DaysLeft</span>,<span class="pl-v">y</span><span class="pl-k">=</span><span class="pl-vo">Mandates</span>,<span class="pl-v">fill</span><span class="pl-k">=</span><span class="pl-vo">Party.En</span>))<span class="pl-k">+</span>
scale_x_reverse()<span class="pl-k">+</span>scale_fill_discrete(<span class="pl-v">name</span><span class="pl-k">=</span><span class="pl-s1"><span class="pl-pds">"</span>Party<span class="pl-pds">"</span></span>)</pre></div>

<ul>
<li>Finally the plots can be viewed in English or Hebrew, and can be downloaded to you local computer using the download button.</li>
</ul>

<h2>
<a id="mandate-simulator-and-coalition-whiteboard" class="anchor" href="#mandate-simulator-and-coalition-whiteboard" aria-hidden="true"><span class="octicon octicon-link"></span></a>Mandate Simulator and Coalition Whiteboard</h2>

<ul>
<li>A bootstrap simulation is run on Polling results from up to 10 of the latest polls using the sampling error as the uncertainty of each mandate published. Taking into account mandate surplus agreements using the <a href="http://en.wikipedia.org/wiki/Hagenbach-Bischoff_quota">Hagenbach-Bischoff quota method</a> and the mandate threshold limit (in this election it is 4 mandates), calculating the simulated final tally of mandates. The distributions are plotted per party and the location of the median published results in the media.View the simulation results by checking the "View Simulation Results checkbox".</li>
<li>The user can choose how many polls to take into account, up to last 10 polls, and how big a simulation they want to run: 50,100,500,1000 random polling results per each party and poll.</li>
</ul>

<p><img src="https://raw.githubusercontent.com/yonicd/Elections/master/www/sim_screen_grab.png" alt="Election Simulation"></p>

<ul>
<li>Once the simulator is complete you can create coalitions based on either the simulated distribution or actual published polls and see who can pass 60 mandates. Choose the coalition parties and the opposition parties from dropdown lists. (Yes the ones chosen are nonsensical on purpose...)</li>
</ul>

<p><img src="https://raw.githubusercontent.com/yonicd/Elections/master/www/coal_screen_grab.png" alt="Coalition Whiteboard"></p>

<h2>
<a id="polling-database" class="anchor" href="#polling-database" aria-hidden="true"><span class="octicon octicon-link"></span></a>Polling Database</h2>

<ul>
<li>All raw data used in the application can be viewed and filtered in a datatable.</li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Israel Election PAD maintained by <a href="https://github.com/yonicd">yonicd</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-60008819-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
